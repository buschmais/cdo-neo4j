<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="Dirk Mahler">
<title>eXtended Objects - Neo4j Datastore</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article">
<div id="header">
<h1>eXtended Objects - Neo4j Datastore</h1>
<div class="details">
<span id="author" class="author">Dirk Mahler</span><br>
<span id="email" class="email"><a href="mailto:dirk.mahler@buschmais.com">dirk.mahler@buschmais.com</a></span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_maven_dependencies">Maven Dependencies</a></li>
<li><a href="#_bootstrapping">Bootstrapping</a>
<ul class="sectlevel2">
<li><a href="#_xounit_via_xml">XOUnit via XML</a></li>
<li><a href="#_xounit_via_xounitbuilder">XOUnit via XOUnitBuilder</a></li>
</ul>
</li>
<li><a href="#_mapping_persistent_types">Mapping Persistent Types</a>
<ul class="sectlevel2">
<li><a href="#_nodes">Nodes</a>
<ul class="sectlevel3">
<li><a href="#_labeled_types">Labeled Types</a></li>
<li><a href="#_inheritance_of_labels">Inheritance Of Labels</a></li>
<li><a href="#TemplateTypes">Template Types</a></li>
</ul>
</li>
<li><a href="#_relations">Relations</a>
<ul class="sectlevel3">
<li><a href="#_unidirectional_relations">Unidirectional Relations</a></li>
<li><a href="#_bidirectional_qualified_relations">Bidirectional Qualified Relations</a></li>
<li><a href="#_typed_relations_with_properties">Typed Relations With Properties</a></li>
<li><a href="#DynamicProperty">Dynamic Properties</a></li>
<li><a href="#_transient_properties">Transient Properties</a></li>
<li><a href="#_user_defined_methods">User defined methods</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_repositories">Repositories</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document describes the Neo4j datastore for <a href="http://github.com/buschmais/extended-objects">eXtended Objects</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As a graph database Neo4j provides very powerful capabilities to store and query highly interconnected data structures
consisting of nodes and relationships between them. With release 2.0 the concept of labels has been introduced. One or
more labels can be added to a single node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>create
  (a:Person:Actor)
set
  a.name="Harrison Ford"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using labels it is possible to write comprehensive queries using Cypher:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>match
  (a:Person)
where
  a.name="Harrison Ford"
return
  a.name;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a node has a label it can be assumed that it represents some type of data which requires the presence of specific
properties and relationships (e.g. property "name" for persons, "ACTED_IN" relations to movies). This implies that a
Neo4j label can be represented as a Java interface and vice versa.</p>
</div>
<div class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Person</span><span class="delimiter">&quot;</span></span>) <span class="comment">// The value &quot;Person&quot; can be omitted, in this case the class name is used</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Person</span> {
  <span class="predefined-type">String</span> getName();
  <span class="type">void</span> setName(<span class="predefined-type">String</span> name);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maven_dependencies">Maven Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Neo4j datastore for eXtended Objects is available from Maven Central and can be specified as dependency in pom.xml files:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
    <span class="comment">&lt;!-- For using an embedded Neo4j instance --&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.buschmais.xo<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>xo.neo4j.embedded<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>0.8.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="comment">&lt;!-- For using a remote Neo4j instance --&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.buschmais.xo<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>xo.neo4j.remote<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>0.8.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="comment">&lt;!-- The XO API --&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.buschmais.xo<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>xo.api<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>0.8.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="comment">&lt;!-- The XO runtime implementation --&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.buschmais.xo<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>xo.impl<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>0.8.0<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;scope&gt;</span>runtime<span class="tag">&lt;/scope&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="comment">&lt;!-- An SLF4j binding --&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.slf4j<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>slf4j-simple<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;scope&gt;</span>runtime<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;version&gt;</span>1.7.21<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="comment">&lt;!-- Optional dependencies for in-memory databases, i.e. URI &quot;memory:///&quot; --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.neo4j<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>neo4j-kernel<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;type&gt;</span>test-jar<span class="tag">&lt;/type&gt;</span>
    <span class="tag">&lt;version&gt;</span>3.1.2<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>org.neo4j<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>neo4j-io<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;type&gt;</span>test-jar<span class="tag">&lt;/type&gt;</span>
    <span class="tag">&lt;version&gt;</span>3.1.2<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bootstrapping">Bootstrapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For a XOManagerFactory to be constructed a so called XO unit must be defined. There are two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using a descriptor META-INF/xo.xml</p>
</li>
<li>
<p>By using an instance of the class "com.buschmais.xo.XOUnit"</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_xounit_via_xml">XOUnit via XML</h3>
<div class="paragraph">
<p>An XO descriptor is a XML file located as classpath resource under "/META-INF/xo.xml" and defines one or more XO units.
Each must be uniquely identified by a name. This is similar to the persistence unit approach defined by the Java Persistence
API (JPA). The following snippet shows a minimum setups</p>
</div>
<div class="listingblock">
<div class="title">META-INF/xo.xml (embedded database)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;v1:xo</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:v1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://buschmais.com/xo/schema/v1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xo-unit</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">movies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;url&gt;</span>file:databases/movies<span class="tag">&lt;/url&gt;</span>
        <span class="tag">&lt;provider&gt;</span>com.buschmais.xo.neo4j.embedded.api.EmbeddedNeo4jXOProvider<span class="tag">&lt;/provider&gt;</span>
        <span class="tag">&lt;types&gt;</span>
            <span class="tag">&lt;type&gt;</span>com.buschmais.xo.neo4j.doc.bootstrap.Person<span class="tag">&lt;/type&gt;</span>
            <span class="tag">&lt;type&gt;</span>com.buschmais.xo.neo4j.doc.bootstrap.Actor<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;/types&gt;</span>
    <span class="tag">&lt;/xo-unit&gt;</span>
<span class="tag">&lt;/v1:xo&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">META-INF/xo.xml (remote database)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;v1:xo</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:v1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://buschmais.com/xo/schema/v1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xo-unit</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">movies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;url&gt;</span>bolt://localhost:7687<span class="tag">&lt;/url&gt;</span>
        <span class="tag">&lt;provider&gt;</span>com.buschmais.xo.neo4j.remote.api.RemoteNeo4jXOProvider<span class="tag">&lt;/provider&gt;</span>
        <span class="tag">&lt;types&gt;</span>
            <span class="tag">&lt;type&gt;</span>com.buschmais.xo.neo4j.doc.bootstrap.Person<span class="tag">&lt;/type&gt;</span>
            <span class="tag">&lt;type&gt;</span>com.buschmais.xo.neo4j.doc.bootstrap.Actor<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;/types&gt;</span>
        <span class="tag">&lt;properties&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j.remote.username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">neo4j.remote.password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">secret</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="comment">&lt;!--
            &lt;property name=&quot;neo4j.remote.encryptionLevel&quot; value=&quot;required&quot;/&gt;
            &lt;property name=&quot;neo4j.remote.trust.strategy&quot; value=&quot;trustCustomCaSignedCertificates&quot;/&gt;
            &lt;property name=&quot;neo4j.remote.trust.certificate&quot; value=&quot;my.crt&quot;/&gt;
            &lt;property name=&quot;neo4j.remote.statement.log.level&quot; value=&quot;info&quot;/&gt;
            --&gt;</span>
        <span class="tag">&lt;/properties&gt;</span>
    <span class="tag">&lt;/xo-unit&gt;</span>
<span class="tag">&lt;/v1:xo&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Support for remote databases is experimental.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">provider</dt>
<dd>
<p>The class name of the datastore provider</p>
<div class="ulist">
<ul>
<li>
<p><code>com.buschmais.xo.neo4j.embedded.api.EmbeddedNeo4jXOProvider</code> for embedded Neo4j databases</p>
</li>
<li>
<p><code>com.buschmais.xo.neo4j.remote.api.RemoteNeo4jXOProvider</code> for remote Neo4j databases via bolt protocol</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">url</dt>
<dd>
<p>The URL to pass to the Neo4j datastore. The following protocols are currently supported:</p>
<div class="ulist">
<ul>
<li>
<p>"file:///C:/neo4j/movies": embedded local database using the specified directory as location for the Neo4j database</p>
</li>
<li>
<p>"memory:///": embedded non-persistent in-memory database</p>
</li>
<li>
<p>"bolt://localhost:7687": remote database</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">types</dt>
<dd>
<p>A list of all persistent types representing labels, relations or repositories</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>An XOManagerFactory instance can now be obtained as demonstrated in the following snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">XOManagerFactory movies = XO.createXOManagerFactory(<span class="string"><span class="delimiter">&quot;</span><span class="content">movies</span><span class="delimiter">&quot;</span></span>);
XOManager xoManager = movies.createXOManager();

xoManager.currentTransaction().begin();

Person person = xoManager.create(Person.class);
person.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Indiana Jones</span><span class="delimiter">&quot;</span></span>);

xoManager.currentTransaction().commit();

xoManager.close();
movies.close();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xounit_via_xounitbuilder">XOUnit via XOUnitBuilder</h3>
<div class="paragraph">
<p>It is also possible to create a XOManagerFactory using an instance of the class 'com.buschmais.xo.api.XOUnit':</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">XOUnit xoUnit = XOUnit.builder().provider(EmbeddedNeo4jXOProvider.class).uri(<span class="keyword">new</span> <span class="predefined-type">URI</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">file:databases/movies</span><span class="delimiter">&quot;</span></span>)).type(Person.class).type(Actor.class)
        .build();
XOManagerFactory movies = XO.createXOManagerFactory(xoUnit);
XOManager xoManager = movies.createXOManager();

xoManager.currentTransaction().begin();

Person person = xoManager.create(Person.class);
person.setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Indiana Jones</span><span class="delimiter">&quot;</span></span>);

xoManager.currentTransaction().commit();

xoManager.close();
movies.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: The class XOUnitBuilder provides a fluent interface for the parameters which may be specified for an XO unit.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapping_persistent_types">Mapping Persistent Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Neo4j database provides the following native datastore concepts:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Node</dt>
<dd>
<p>An entity, e.g. a Person, Movie, etc. A node might have labels and properties.</p>
</dd>
<dt class="hdlist1">Relationship</dt>
<dd>
<p>A directed relation between two nodes, might have properties. The lifecycle of relation depends on the lifecycle of the
nodes it connects.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The eXtended Objects datastore for Neo4j allows mapping of all these concepts to Java interfaces.</p>
</div>
<div class="sect2">
<h3 id="_nodes">Nodes</h3>
<div class="sect3">
<h4 id="_labeled_types">Labeled Types</h4>
<div class="paragraph">
<p>Neo4j allows adding one or more labels to a node. These labels are used by eXtended Objects to identify the corresponding Java
type(s) a node is representing. Thus for each label that shall be used by the application a corresponding interface type must be created
which is annotated with @Label.</p>
</div>
<div class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Person</span> {

    <span class="predefined-type">String</span> getName();
    <span class="type">void</span> setName(<span class="predefined-type">String</span> name);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the label defaults to the name of the interface, in this case 'Person'. A specific value can be enforced by adding a
value to the @Label annotation.</p>
</div>
<div class="paragraph">
<p>It can also be seen that a label usually enforces the presence of specific properties (or relations) on a node. The name of a
property - starting with a lower case letter - is used to store its value in the database, this can be overwritten using @Property. The
following example demonstrates explicit mappings for a label and a property:</p>
</div>
<div class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">MyPerson</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Person</span> {

    <span class="annotation">@Property</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">myName</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">String</span> getName();
    <span class="type">void</span> setName(<span class="predefined-type">String</span> name);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The mapping of relations will be covered later.</p>
</div>
</div>
<div class="sect3">
<h4 id="_inheritance_of_labels">Inheritance Of Labels</h4>
<div class="paragraph">
<p>A labeled type can extend from one or more labeled types.</p>
</div>
<div class="listingblock">
<div class="title">Actor.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Actor</span> <span class="directive">extends</span> Person {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case a node created using the type Actor would be labeled with both 'Person' and 'Actor'. This way of combining types is referred to
as 'static composition'.</p>
</div>
</div>
<div class="sect3">
<h4 id="TemplateTypes">Template Types</h4>
<div class="paragraph">
<p>There might be situations where the same properties or relations shall be re-used between various labels. In this case template types can be
used, these are just interfaces specifying properties and relations which shall be shared. The following example demonstrates how the
property name of the labeled type Person is extracted to a template type:</p>
</div>
<div class="listingblock">
<div class="title">Named.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">Named</span> {

    <span class="predefined-type">String</span> getName();
    <span class="type">void</span> setName(<span class="predefined-type">String</span> name);

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Person</span> <span class="directive">extends</span> Named {

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_relations">Relations</h3>
<div class="sect3">
<h4 id="_unidirectional_relations">Unidirectional Relations</h4>
<div class="paragraph">
<p>A node can directly reference other nodes using relation properties. A property of a labeled type or template type is treated as such if it
references another labeled type or a collection thereof.</p>
</div>
<div class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Movie</span> {

    <span class="predefined-type">String</span> getTitle();
    <span class="type">void</span> setTitle();

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Actor.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Actor</span> <span class="directive">extends</span> Person {

    <span class="predefined-type">List</span>&lt;Movie&gt; getActedIn();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no further mapping information is provided an outgoing unidirectional relation using the fully capitalized name of
the property is assumed. The name may be specified using the @Relation annotation with the desired value. Furthermore
using one of the annotations @Outgoing or @Incoming the direction of the relation can be specified.</p>
</div>
<div class="listingblock">
<div class="title">Actor.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Actor</span> <span class="directive">extends</span> Person {

    <span class="annotation">@Relation</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">ACTED_IN</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@Outgoing</span>
    <span class="predefined-type">List</span>&lt;Movie&gt; getActedIn();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note on multi-valued relations (i.e. collections):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Only the following types are supported: 'java.util.Collection', 'java.util.List' or 'java.util.Set'.</p>
</li>
<li>
<p>It is recommend to only specify the getter method of the property, as add or remove operations can be performed using the corresponding
collection methods</p>
</li>
<li>
<p>The provided 'java.util.Set' implementation ensures uniqueness of the relation to the referenced node, if this is not necessary
'java.util.List' should be prefered for faster add-operations.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bidirectional_qualified_relations">Bidirectional Qualified Relations</h4>
<div class="paragraph">
<p>Relations in many case shall be accessible from both directions. One possible way is to use two independent
unidirectional relations which map to the same relation type; one of them annotated with @Outgoing, the other with
@Incoming. There are some problems with this approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is not explicitly visible that the two relation properties are mapped to the same type</p>
</li>
<li>
<p>renaming of the type or of one the properties might break the mapping</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The recommended way is to use an annotation which qualifies the relation and holds the mapping information at a single
point:</p>
</div>
<div class="listingblock">
<div class="title">ActedIn.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Relation</span>
<span class="annotation">@Retention</span>(RUNTIME)
<span class="directive">public</span> <span class="annotation">@interface</span> ActedIn {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Actor.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Actor</span> <span class="directive">extends</span> Person {

    <span class="annotation">@ActedIn</span>
    <span class="annotation">@Outgoing</span>
    <span class="predefined-type">List</span>&lt;Movie&gt; getActedIn();

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Movie</span> {

    <span class="predefined-type">String</span> getTitle();
    <span class="type">void</span> setTitle();

    <span class="annotation">@ActedIn</span>
    <span class="annotation">@Incoming</span>
    <span class="predefined-type">List</span>&lt;Actor&gt; getActors();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_typed_relations_with_properties">Typed Relations With Properties</h4>
<div class="paragraph">
<p>If a relation between two nodes shall have properties a dedicated type must be declared and registered in the XOUnit.
It must contain two properties returning the types of referenced types which are annotated with @Incoming and @Outgoing:</p>
</div>
<div class="listingblock">
<div class="title">Directed.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Relation</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Directed</span> {

    <span class="annotation">@Outgoing</span>
    Director getDirector();

    <span class="annotation">@Incoming</span>
    Movie getMovie();

    <span class="type">int</span> getYear();
    <span class="type">void</span> setYear(<span class="type">int</span> year);

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Director.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Director</span> <span class="directive">extends</span> Person {

    <span class="predefined-type">List</span>&lt;Directed&gt; getDirected();

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Movie</span> {

    <span class="predefined-type">String</span> getTitle();
    <span class="type">void</span> setTitle();

    <span class="predefined-type">List</span>&lt;Directed&gt; getDirected();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The relation is created explicitly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">xoManager.currentTransaction().begin();

Director director = xoManager.create(Director.class);
Movie movie = xoManager.create(Movie.class);

Directed directed = xoManager.create(director, Directed.class, movie);
directed.setYear(<span class="integer">2017</span>);

xoManager.currentTransaction().commit();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: If the typed relation references the same labeled type at both ends then the according properties of the latter
must also be annotated with @Outgoing and @Incoming:</p>
</div>
<div class="listingblock">
<div class="title">References.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Relation</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">References</span> {

    <span class="annotation">@Outgoing</span>
    Movie getReferencing();

    <span class="annotation">@Incoming</span>
    Movie getReferenced();

    <span class="type">int</span> getMinute();
    <span class="type">void</span> setMinute(<span class="type">int</span> minute);

    <span class="type">int</span> getSecond();
    <span class="type">void</span> setSecond(<span class="type">int</span> second);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Movie</span> {

    <span class="annotation">@Outgoing</span>
    <span class="predefined-type">List</span>&lt;References&gt; getReferenced();

    <span class="annotation">@Incoming</span>
    <span class="predefined-type">List</span>&lt;References&gt; getReferencedBy();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Typed relations may also be constructed using <a href="#TemplateTypes">Template Types</a>, i.e. types which define commonly used Properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="DynamicProperty">Dynamic Properties</h4>
<div class="paragraph">
<p>Labeled types or relation types may also define methods which execute a query on invocation and return the result:</p>
</div>
<div class="listingblock">
<div class="title">Movie.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Movie</span> {

    <span class="annotation">@ResultOf</span>
    <span class="annotation">@Cypher</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">match (a:Actor)-[:ACTED_IN]-&gt;(m:Movie) where id(m)={this} return count(a)</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">Long</span> getActorCount();

    <span class="annotation">@ResultOf</span>
    <span class="annotation">@Cypher</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">match (a:Actor)-[:ACTED_IN]-&gt;(m:Movie) where id(m)={this} and a.age={age} return count(a)</span><span class="delimiter">&quot;</span></span>)
    <span class="predefined-type">Long</span> getActorCountByAge(<span class="annotation">@Parameter</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">age</span><span class="delimiter">&quot;</span></span>) <span class="type">int</span> age);

    <span class="annotation">@ActedIn</span>
    <span class="annotation">@Incoming</span>
    <span class="predefined-type">List</span>&lt;Actor&gt; getActors();

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_transient_properties">Transient Properties</h4>
<div class="paragraph">
<p>Properties of entities or relations can be declared as transient, i.e. they may be used at runtime but will not be stored in the database:</p>
</div>
<div class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Person</span> {

    <span class="annotation">@Transient</span>
    <span class="predefined-type">String</span> getName();
    <span class="type">void</span> setName(<span class="predefined-type">String</span> name);

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_defined_methods">User defined methods</h4>
<div class="paragraph">
<p>It can be useful to provide a custom implementation of a method which has direct access to the underlying datatypes.
This can be achieved using '@ImplementedBy', the following example uses an embedded Neo4j instance:</p>
</div>
<div class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Label</span>
<span class="directive">public</span> <span class="type">interface</span> <span class="class">Person</span> {

    <span class="annotation">@ImplementedBy</span>(SetNameMethod.class)
    <span class="predefined-type">String</span> setName(<span class="predefined-type">String</span> firstName, <span class="predefined-type">String</span> lastName);

    <span class="type">class</span> <span class="class">SetNameMethod</span> <span class="directive">implements</span> ProxyMethod&lt;EmbeddedNode&gt; {

        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">Object</span> invoke(EmbeddedNode node, <span class="predefined-type">Object</span> instance, <span class="predefined-type">Object</span><span class="type">[]</span> args) {
            <span class="predefined-type">String</span> firstName = (<span class="predefined-type">String</span>) args[<span class="integer">0</span>];
            <span class="predefined-type">String</span> lastName = (<span class="predefined-type">String</span>) args[<span class="integer">1</span>];
            <span class="predefined-type">String</span> fullName = firstName + <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span> + lastName;
            node.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>, fullName);
            <span class="keyword">return</span> fullName;
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_repositories">Repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>eXtended Objects supports the concepts of repositories. Similar to nodes and relationships they are also represented
by Java interfaces and must be registered in the XOUnit. They allow the definition of <a href="#DynamicProperty">dynamic properties</a>:</p>
</div>
<div id="source" class="listingblock">
<div class="title">PersonRepository.java</div>
<div class="content">
<pre>@Repository
public interface PersonRepository {

    @ResultOf
    @Cypher("MATCH (p:Person) WHERE p.name={name} RETURN p")
    Result&lt;Person&gt; getPersonsByName(@Parameter("name") String name);
}</pre>
</div>
</div>
<div class="paragraph">
<p>A repository instance can be obtained from the XOManager:</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>xoManager.currentTransaction().begin();
Person person = xoManager.create(Person.class);
person.setName("Indiana Jones");

PersonRepository personRepository = xoManager.getRepository(PersonRepository.class);
Result&lt;Person&gt; personsByName = personRepository.getPersonsByName("Indiana Jones");
Person indy = personsByName.getSingleResult();

xoManager.currentTransaction().commit();</pre>
</div>
</div>
<div class="paragraph">
<p>There is a predefined repository type that allows finding instances by labels.
The following class declares an indexed property <code>name</code> for the label <code>Person</code>:</p>
</div>
<div id="source" class="listingblock">
<div class="title">Person.java</div>
<div class="content">
<pre>@Label
public interface Person {

    @Indexed
    String getName();
    void setName(String name);

}</pre>
</div>
</div>
<div class="paragraph">
<p>It is possible to define a repository which inherits from <code>TypedNeo4jRepository</code> and pass <code>Person</code> as type argument:</p>
</div>
<div id="source" class="listingblock">
<div class="title">TypedPersonRepository.java</div>
<div class="content">
<pre>@Repository
public interface TypedPersonRepository extends TypedNeo4jRepository&lt;Person&gt; {
}</pre>
</div>
</div>
<div class="paragraph">
<p>This allows using the provided <code>find</code> method:</p>
</div>
<div id="source" class="listingblock">
<div class="content">
<pre>xoManager.currentTransaction().begin();
Person person = xoManager.create(Person.class);
person.setName("Indiana Jones");

PersonRepository personRepository = xoManager.getRepository(PersonRepository.class);
Result&lt;Person&gt; personsByName = personRepository.getPersonsByName("Indiana Jones");
Person indy = personsByName.getSingleResult();

xoManager.currentTransaction().commit();</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2017-03-19 20:26:03 CET
</div>
</div>
</body>
</html>