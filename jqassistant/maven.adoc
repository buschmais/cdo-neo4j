[[maven:Default]]
[role=group,includesConcepts="maven:MainArtifactDependencies.graphml"]
== Maven Rules

This section describes rules that apply to the Maven build system.

[[maven:MainArtifact]]
[source,cypher,role=concept]
// classpath:Resolve is required due to https://github.com/buschmais/jqa-maven-plugin/issues/7
.Adds a label `Main` to all non test artifacts created by a Maven project.
----
MATCH
  (:Maven:Project)-[:CREATES]->(artifact:Artifact)
WHERE
  NOT artifact.type in [
    "test-jar",
    "pom"
    ]
SET
  artifact:Main
RETURN
  artifact as MainArtifact
----

[[maven:MainArtifactDependencies.graphml]]
[source,cypher,role=concept,requiresConcepts="maven:MainArtifact"]
.Creates a GraphML report about the created artifacts and their dependencies
----
MATCH
  (artifact:Main:Artifact)
OPTIONAL MATCH
  (artifact)-[dependsOn:DEPENDS_ON]->(:Main:Artifact)
RETURN
  *
----
